<div class="application-background">
	<div class="center-content">
		<div class="post-component">
           	<div class="post-header">
             	<span class="header-button clickable" ng-click="gotoProfile(post.owner.username)">
             		{{post.owner.username}}
             	</span>
             	<span><strong>
				    {{'postedIn.message' | translate}}
			    </strong></span>
             	<a class="no-underline" ng-href="#/groups/{{post.group.name}}">
               		<span class="header-button">{{post.group.name}}</span>
             	</a>
             	<span><strong>
             		{{post.date | timeAgo}}
             	</strong></span>
			 	<i ng-if="(loggedUser.userid == post.group.owner.userid) || (loggedUser.admin) || (loggedUser.userid == post.owner.userid)" class="header-button-delete fas fa-trash-alt clickable" ng-click="deleteConfirmModal({group: post.group, post: post}, 'post')"></i>
           	</div>
           	<hr>
           	<h2 class="post-wrap">{{post.title}}</h2>
           	<div class="post-wrap">
            	{{post.content}}
           	</div>
			<img ng-if="post.imageid" class="image-post" ng-src="{{getImageURL(post.imageid)}}" />
           	<br>
           	<div class="post-info">
           		<div class="info-item">
			        <strong><i class="fas fa-comment"></i>
			            {{post.comments}} {{'comments.message' | translate}}
			        </strong>
			    </div>
				<div ng-if="isLoggedIn" class="info-item votes-controls">
				    <div>
						<div class="form-group">
							<button class="no-btn" ng-click="upvotePost(post.group.name, post.postid)">
								<i ng-if="post.userVote == 1" class="fas fa-arrow-up icon-color-selected"></i>
								<i ng-if="post.userVote != 1" class="fas fa-arrow-up icon-color"></i>
							</button>
						</div>
					</div>
					<strong class="score-count">{{post.votes}}</strong>
				    <div>
						<div class="form-group">
							<button class="no-btn" ng-click="downvotePost(post.group.name, post.postid)">
								<i ng-if="post.userVote == -1" class="fas fa-arrow-down icon-color-selected"></i>
								<i ng-if="post.userVote != -1" class="fas fa-arrow-down icon-color"></i>
							</button>
						</div>
					</div>
				</div>
		   		<div ng-if="!isLoggedIn" class="info-item">
					<strong class="score-count">
						{{post.votes}} {{'posts.votes' | translate}}
					</strong>
				</div>
           </div>
           <hr>
           <div class="post-component-comments">
             	<h4>
             		{{'postCommentsTitle.title' | translate}}
             	</h4>
             	<!-- Create Comment -->
				<form name="createCommentForm" accept-charset="UTF-8" novalidate>
					<div ng-if="isLoggedIn">
						<div class="form-group">
			   				<textarea path="content" class="form-control" id="comment-content" rows="3" placeholder="{{'addComment.placeholder' | translate}}" name="content" ng-model="newComment.content" ng-minlength="1" ng-maxlength="1000"></textarea>
			   				<span ng-show="((createCommentForm.content.$error.minlength || createCommentForm.content.$error.maxlength) && createCommentForm.$submitted)" class="formError">
	                        	{{'Size.createCommentForm.content' | translate}}
	                    	</span>
			   			</div>
	                  	<button type="submit" ng-click="doSubmit(createCommentForm, null)" class="create-comment-btn app-btn-primary">
	                  		{{'createCommentConfirmation.button.message' | translate}}
	                  	</button>
                  	</div>
				</form>
				<!-- Sign in suggestion-->
				<h5 ng-if="!isLoggedIn">
					{{'comments.suggestion' | translate}}
				</h5>
				<!-- Comment List -->
	            <div ng-if="comments.length > 0" ng-repeat="comment in comments" class="comment">
	               	<div class="comment-header">
	                	<span class="header-button clickable" ng-click="gotoProfile(post.owner.username)">
	                		{{comment.owner.username}}
	                	</span>
	                 	<span><strong>
	                 		{{comment.date | timeAgo}}
	                 	</strong></span>
						<i ng-if="(loggedUser.userid == post.group.owner.userid) || (loggedUser.admin) || (loggedUser.userid == post.owner.userid) || (loggedUser.userid == comment.owner.userid)" class="header-button-delete fas fa-trash-alt clickable" ng-click="deleteConfirmModal({group: post.group, post: post, comment: comment}, 'comment')"></i>
	               	</div>
	               	<hr class="comment-separator">
					<div ng-if="comment.replyTo" class="comment-reply">
				        <div class="comment-header">
				            <span class="header-button clickable comment-reply-button-color" ng-click="gotoProfile(comment.replyTo.owner.username)">
				                {{comment.replyTo.owner.username}}
				            </span>
				            <span><strong>
				                {{comment.replyTo.date | timeAgo}}
				            </strong></span>
				        </div>
				        <hr class="comment-separator">
				        <div class="comment-component-content">
				            {{comment.replyTo.content}}
				        </div>
				    </div>
	               	<div class="comment-component-content">
	                 	{{comment.content}}
	               	</div>
					<div class="comment-footer">
				 		<div class="info-item votes-controls">
				 			<div ng-if="isLoggedIn">
						 		<div class="form-group">
						 			<button class="no-btn" ng-click="upvoteComment(post.group.name, post.postid, comment.commentid)">
						 				<i ng-if="comment.userVote == 1" class="fas fa-arrow-up icon-color-selected"></i>
						 				<i ng-if="comment.userVote != 1" class="fas fa-arrow-up icon-color"></i>
						 			</button>
						 		</div>
				 			</div>
				 			<strong class="score-count">
				 				{{comment.votes}} {{(!loggedUser ? 'comments.votes' : '') | translate}}
				 			</strong>
				 			<div ng-if="isLoggedIn">
						 		<div class="form-group">
						 			<button class="no-btn" ng-click="downvoteComment(post.group.name, post.postid, comment.commentid)">
						 				<i ng-if="comment.userVote == -1" class="fas fa-arrow-down icon-color-selected"></i>
						 				<i ng-if="comment.userVote != -1" class="fas fa-arrow-down icon-color"></i>
						 			</button>
						 		</div>
				 			</div>
				 		</div>
						<div ng-if="isLoggedIn" ng-click="showReplyForm($event)" class="comment-footer-button reply-button clickable">
							<strong>
								{{'comments.reply.button.message' | translate}}
							</strong>
						</div>
						<div class="info-item">
							<strong ng-if="comment.replies == 1">
								{{comment.replies}} {{'comments.moreReply.button.message' | translate}}
							</strong>
							<strong ng-if="comment.replies > 1">
								{{comment.replies}} {{'comments.moreReplies.button.message' | translate}}
							</strong>						
						</div>
					</div>
					<!-- Reply Comment Form   -->
					<div class="reply-comment-form">
						<form name="createCommentReplyForm" accept-charset="UTF-8" novalidate>
							<div ng-if="isLoggedIn">
								<div class="form-group">
						   			<textarea path="content" class="form-control" id="reply-comment-content" rows="3" placeholder="{{'addComment.placeholder' | translate}}" name="content" ng-model="newCommentReply.content" ng-minlength="1" ng-maxlength="1000"></textarea>
						   			<span ng-show="((createCommentReplyForm.content.$error.minlength || createCommentReplyForm.content.$error.maxlength) && createCommentReplyForm.$submitted)" class="formError">
	                        			{{'Size.createCommentForm.content' | translate}}
	                    			</span>
						   		</div>
								<div class="button-to-the-right">
					                  <button type="submit" ng-click="doSubmit(createCommentReplyForm, comment.commentid)" class="reply-button-submit create-comment-btn app-btn-primary">
					                  	{{'createCommentConfirmation.button.message' | translate}}    
					                  </button>
								</div>
							</div>
						</form>
					</div>	         
	            </div>
				<!-- End Comment List -->
            	<br>
				<nav ng-if="commentsPageCount > 1" aria-label="...">
  					<ul class="pagination">
    					<li ng-if="page == 1" class="page-item disabled">
      						<span class="page-link">Back</span>
    					</li>
            			<li ng-if="page != 1" class="page-item">
      						<a class="page-link" ng-href="{{buildURL({page: page-1})}}">Back</a>
    					</li>
    					<li ng-repeat="x in [].constructor(commentsPageCount) track by $index" class="page-item" ng-class="{active: page == $index+1}">
    						<a ng-if="page != $index+1" class="page-link" ng-href="{{buildURL({page: $index+1})}}">
    							{{$index+1}}
    						</a>
    						<span ng-if="page == $index+1" class="page-link">
      							{{$index+1}}
      							<span class="sr-only">(current)</span>
      						</span>
    					</li>
    					<li ng-if="page == commentsPageCount" class="page-item disabled">
      						<span class="page-link">Next</span>
    					</li>
    					<li ng-if="page != commentsPageCount" class="page-item">
      						<a class="page-link" ng-href="{{buildURL({page: page+1})}}">Next</a>
    					</li>
  					</ul>
				</nav>
          	</div>
       	</div>
	</div>
</div>